# How to use Cmake
## How to read files in cmake project
Certainly! `add_custom_command` is a CMake function that allows you to specify a custom command that should be run as part of the build process. It is typically used to generate files that are needed by the build, or to perform other tasks that are required for the build to succeed.

Here is the basic syntax for `add_custom_command`:

```cmake
add_custom_command(
  OUTPUT output_files
  COMMAND command
  [ARGS args...]
  [MAIN_DEPENDENCY input_file]
  [DEPENDS dependency_files...]
  [WORKING_DIRECTORY working_directory]
  [COMMENT comment]
  [VERBATIM]
)

```

The `OUTPUT` parameter specifies the files that will be generated by the custom command. These files will be treated as outputs of the custom command, and will be treated as dependencies for other targets that depend on them.

The `COMMAND` parameter specifies the command to be run. This can be any shell command, or it can be the name of a CMake function.

The `ARGS` parameter specifies any arguments that should be passed to the command.

The `MAIN_DEPENDENCY` parameter specifies an input file that should be treated as the main dependency of the custom command. If this file is modified, the custom command will be re-run.

The `DEPENDS` parameter specifies any other dependencies of the custom command. If any of these files are modified, the custom command will be re-run.

The `WORKING_DIRECTORY` parameter specifies the working directory that should be used when running the custom command.

The `COMMENT` parameter specifies a message that will be displayed when the custom command is run.

The `VERBATIM` flag indicates that the `COMMAND` and `ARGS` parameters should be treated as raw text, rather than being interpreted as CMake variables or functions.

Here is an example of how you can use `add_custom_command` to copy a file as part of the build process:

```
add_custom_command(OUTPUT file.txt
                   COMMAND ${CMAKE_COMMAND} -E copy ${CMAKE_CURRENT_SOURCE_DIR}/file.txt ${CMAKE_CURRENT_BINARY_DIR}/file.txt
                   DEPENDS ${CMAKE_CURRENT_SOURCE_DIR}/file.txt)

```

This will create a custom command that copies the file `file.txt` from the source directory to the build directory. The `OUTPUT` parameter specifies that the file `file.txt` in the build directory is the output of the custom command. The `COMMAND` parameter specifies the command to be run, which is the `CMAKE_COMMAND` built-in variable followed by the `-E copy` option, which tells CMake to copy a file. The `DEPENDS` parameter specifies that the input file `file.txt` in the source directory is a dependency of the custom command.

I hope this helps! Let me know if you have any further questions.

**example:**
Here is an example of a CMake file that you can use to build a program that reads a text file called foo.txt in the same directory as the source file bar.cpp:
```cmake
cmake_minimum_required(VERSION 3.10)
project(myproject)

add_executable(myprogram bar.cpp)

add_custom_command(OUTPUT foo.txt
                   COMMAND ${CMAKE_COMMAND} -E copy ${CMAKE_CURRENT_SOURCE_DIR}/foo.txt ${CMAKE_CURRENT_BINARY_DIR}/foo.txt
                   DEPENDS ${CMAKE_CURRENT_SOURCE_DIR}/foo.txt)

add_custom_target(copy_file DEPENDS foo.txt)
add_dependencies(myprogram copy_file)

```

This CMake file does the following:

- It specifies the minimum required version of CMake as 3.10 and sets the project name to myproject.
- It creates an executable target called myprogram from the source file bar.cpp.
- It creates a custom command that copies the file foo.txt from the source directory to the build directory. The OUTPUT parameter specifies that the file foo.txt in the build directory is the output of the custom command. The COMMAND parameter specifies the command to be run, which is the CMAKE_COMMAND built-in variable followed by the -E copy option, which tells CMake to copy a file. The DEPENDS parameter specifies that the input file foo.txt in the source directory is a dependency of the custom command.
- It creates a custom target called copy_file that depends on the output of the custom command.
- It adds a dependency on the copy_file target to the myprogram target, which ensures that the copy_file target will be built before the myprogram target.
- This CMake file will ensure that the text file foo.txt is copied to the build directory before the program is built, and that the program is rebuilt if the text file is modified.
- To build the program, you can run the following commands in the terminal:

## How to write to files in cmake project
```cmake
cmake_minimum_required(VERSION 3.10)
project(myproject)

add_executable(myprogram main.cpp)

add_custom_command(OUTPUT file.txt
                   COMMAND ${CMAKE_COMMAND} -E touch ${CMAKE_CURRENT_BINARY_DIR}/file.txt
                   )

add_custom_target(create_file DEPENDS file.txt)
add_dependencies(myprogram create_file)

```